lineages:
  - source:
      platform: "postgres"
      dataset: "postgres.public.customers"
    target:
      platform: "postgres"
      dataset: "postgres.public.client"
    field_mappings:
      - source_field: "customer_id"
        target_field: "client_id"
      - source_field: "firstname"
        target_field: "first_name"
      - source_field: "lastname"
        target_field: "surname"
      - source_field: "nino"
        target_field: "national_insurance_number"
      - source_field: "city"
        target_field: "city"
      - source_field: "zip_code"
        target_field: "postcode"
  - source:
      platform: "postgres"
      dataset: "postgres.public.pos_sales"
    target:
      platform: "postgres"
      dataset: "postgres.public.orders"
    field_mappings:
      - source_field: "pos_customer_id"
        target_field: "customer_id"
      - source_field: "pos_sku"
        target_field: "product_id"
      - source_field: "sale_quantity"
        target_field: "quantity"
      - source_field: "item_price"
        target_field: "unit_price"
      - source_field: "subtotal"
        target_field: "value_ex_tax"
      - source_field: "tax_percentage"
        target_field: "tax_rate"
      - source_field: "tax_charged"
        target_field: "tax_amount"
      - source_field: "total_amount"
        target_field: "value_inc_tax"
      - source_field: "transaction_date"
        target_field: "order_date"
      - source_field: "completed_date"
        target_field: "completion_date"
      - source_field: "transaction_status"
        target_field: "status"
      - source_field: "payment_method"
        target_field: "payment_method"
      - source_field: "transaction_notes"
        target_field: "notes"
  - source:
      platform: "postgres"
      dataset: "postgres.public.erp_orders"
    target:
      platform: "postgres"
      dataset: "postgres.public.orders"
    field_mappings:
      - source_field: "erp_customer_reference"
        target_field: "customer_id"
      - source_field: "erp_product_code"
        target_field: "product_id"
      - source_field: "order_qty"
        target_field: "quantity"
      - source_field: "unit_cost"
        target_field: "unit_price"
      - source_field: "net_value"
        target_field: "value_ex_tax"
      - source_field: "vat_rate"
        target_field: "tax_rate"
      - source_field: "vat_amount"
        target_field: "tax_amount"
      - source_field: "gross_value"
        target_field: "value_inc_tax"
      - source_field: "order_creation_date"
        target_field: "order_date"
      - source_field: "order_fulfilled_date"
        target_field: "completion_date"
      - source_field: "order_status"
        target_field: "status"
      - source_field: "payment_type"
        target_field: "payment_method"
      - source_field: "delivery_address"
        target_field: "shipping_address"
      - source_field: "delivery_postcode"
        target_field: "shipping_postcode"
      - source_field: "order_comments"
        target_field: "notes"